<!DOCTYPE html>
<html>
<head>
    <title>Date Test</title>
</head>
<body>
    <h1>Date Calculation Test</h1>
    <div id="results"></div>
    
    <script>
        function testDateCalculations() {
            const results = [];
            
            // Test various years
            const testYears = [2020, 2021, 2022, 2023, 2024, 2025];
            
            testYears.forEach(year => {
                // Old method (local timezone)
                const oldStart = new Date(year, 0, 1).toISOString().split('T')[0];
                const oldEnd = new Date(year, 11, 31).toISOString().split('T')[0];
                
                // New method (UTC)
                const newStart = new Date(Date.UTC(year, 0, 1)).toISOString().split('T')[0];
                const newEnd = new Date(Date.UTC(year, 11, 31)).toISOString().split('T')[0];
                
                results.push({
                    year,
                    oldMethod: { start: oldStart, end: oldEnd },
                    newMethod: { start: newStart, end: newEnd },
                    match: oldStart === newStart && oldEnd === newEnd
                });
            });
            
            return results;
        }
        
        // Run test and display results
        const testResults = testDateCalculations();
        const resultsDiv = document.getElementById('results');
        
        testResults.forEach(result => {
            const div = document.createElement('div');
            div.style.marginBottom = '10px';
            div.style.padding = '10px';
            div.style.border = '1px solid #ccc';
            div.style.backgroundColor = result.match ? '#e8f5e8' : '#ffe8e8';
            
            div.innerHTML = `
                <strong>Year ${result.year}:</strong><br>
                Old method: ${result.oldMethod.start} to ${result.oldMethod.end}<br>
                New method: ${result.newMethod.start} to ${result.newMethod.end}<br>
                Match: ${result.match ? 'YES' : 'NO'}
            `;
            
            resultsDiv.appendChild(div);
        });
        
        // Also log timezone info
        const timezoneDiv = document.createElement('div');
        timezoneDiv.style.marginTop = '20px';
        timezoneDiv.style.padding = '10px';
        timezoneDiv.style.backgroundColor = '#f0f0f0';
        timezoneDiv.innerHTML = `
            <strong>Browser Info:</strong><br>
            Timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}<br>
            Timezone Offset: ${new Date().getTimezoneOffset()} minutes<br>
            Current Date: ${new Date().toISOString()}<br>
            Current Local Date: ${new Date().toLocaleDateString()}
        `;
        resultsDiv.appendChild(timezoneDiv);
    </script>
</body>
</html>
